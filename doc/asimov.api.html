<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>asimov.api documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Asimov 0.1.1 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>asimov</span></div></div></li><li class="depth-2 branch current"><a href="asimov.api.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></a></li><li class="depth-2 branch"><a href="asimov.message.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>message</span></div></a></li><li class="depth-2 branch"><a href="asimov.tcpros.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tcpros</span></div></a></li><li class="depth-2 branch"><a href="asimov.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2"><a href="asimov.xmlrpc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>xmlrpc</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="asimov.api.html#var-init-node.21"><div class="inner"><span>init-node!</span></div></a></li><li class="depth-1"><a href="asimov.api.html#var-msg"><div class="inner"><span>msg</span></div></a></li><li class="depth-1"><a href="asimov.api.html#var-msgs"><div class="inner"><span>msgs</span></div></a></li><li class="depth-1"><a href="asimov.api.html#var-pub.21"><div class="inner"><span>pub!</span></div></a></li><li class="depth-1"><a href="asimov.api.html#var-sub.21"><div class="inner"><span>sub!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">asimov.api</h2><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-init-node.21"><h3>init-node!</h3><div class="usage"><code>(init-node! name client-host master-host master-port hosts)</code></div><div class="doc"><pre class="plaintext">Starts a new ros node.
This node connects to a single master and can subscibe and publish
to other nodes that are connected to it.
Multiple nodes with the same or different masters can be started
simultaneously, this allows for communication with multiple masters
and the creation of multiple services within the same process or repl.

Expects:
 client-host:string  The address of the machine the node runs on, in the masters network.
 master-host:string The adress of the machine running the ros master.
 master-port:number The port on which the master communicates.
 hosts:{string string} A hosts map that has the same function as the hosts file.
 name:string The name of the node.

Returns an atom storing all the connections state.
Which can then be used to publish and subscribe to topics.</pre></div><div class="src-link"><a href="http://github.com/code-iai/asimov/blob/master/src/asimov/api.clj#L10">view source</a></div></div><div class="public anchor" id="var-msg"><h3>msg</h3><div class="usage"><code>(msg id raw)</code><code>(msg msgs id raw)</code></div><div class="doc"><pre class="plaintext">Creates a single message definition from a string.
When loading a message definition for which the id already exists,
the old message definition will be overriden and message definitions
depending on it will be rebuild.
Note that messages must be loaded in the order they depend on each other,
if you want to load multiple messages you should use `msgs`.

Expects:
 msgs:map The messages already loaded.
          It has to contain the dependencies of this message definition.
          Defaults to the empty map.
 id:string The `package/name` identifier of this message.
 raw:string The raw message definition in the ros message definition format.

Returns the given message definition map with the new message added to it.</pre></div><div class="src-link"><a href="http://github.com/code-iai/asimov/blob/master/src/asimov/api.clj#L132">view source</a></div></div><div class="public anchor" id="var-msgs"><h3>msgs</h3><div class="usage"><code>(msgs dir)</code><code>(msgs msgs dir)</code></div><div class="doc"><pre class="plaintext">Loads all the message definitions contained in the given directory.
Message definitions may be stored at arbitrary depth as long as they follow
the ros `package_name/msgs/msg_name.msg` path convention.
When loading message definitions for which the id already exists,
the old message definitions will be overriden and message definitions
depending on them will be rebuild.
Note that messages must be loaded in the order they depend on each other,
so you should load them either all at once or take appropriate measures.

Expects:
 msgs:map The messages already loaded.
          It has to contain the dependencies of this message definition.
          Defaults to the empty map.
 dir:string The directory from which the messages are to be loaded.

Returns the given message definition map with the new messages added to it.</pre></div><div class="src-link"><a href="http://github.com/code-iai/asimov/blob/master/src/asimov/api.clj#L157">view source</a></div></div><div class="public anchor" id="var-pub.21"><h3>pub!</h3><div class="usage"><code>(pub! node msg-def topic)</code></div><div class="doc"><pre class="plaintext">Makes the node publish to a topic.

Expects:
 node:atom A node that is supposed to make the publication.
 msg-def:map The message definition to be used to serialize send messages.
 topic:string The name of the topic.

Returns a core.async sliding channel that will forward messages onto the topic.
This channel will also be stored on the node atom.</pre></div><div class="src-link"><a href="http://github.com/code-iai/asimov/blob/master/src/asimov/api.clj#L103">view source</a></div></div><div class="public anchor" id="var-sub.21"><h3>sub!</h3><div class="usage"><code>(sub! node msg-def topic)</code></div><div class="doc"><pre class="plaintext">Subscribes a node to a topic.
Currently connection will only happen to those nodes that have already
published the topic. This is subject to change, so that connections will automatically
be added once new publishers appear.

Expects:
 node:atom A node that is supposed to make the subscription.
 msg-def:map The message definition to be used to deserialize received messages.
 topic:string The name of the topic.

Returns a core.async sliding channel that will contain messages received on the topic.
This channel will also be stored on the node atom.</pre></div><div class="src-link"><a href="http://github.com/code-iai/asimov/blob/master/src/asimov/api.clj#L54">view source</a></div></div></div></body></html>